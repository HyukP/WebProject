html 
    head 
        title Chat Room
        link(rel='stylesheet', href='/stylesheets/Chat.css')
        script(src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js") 
    style.
        .Bubble {
            padding : 5px;
            width : 50%;
            height : 75px;
            background-color: white;
            border-radius: 5px;
            margin-bottom : 10px;
        }
    body
       nav(class="nav")
            ul(class="navbar__menu")
                div(class="home")
                    a(href="../")
                        img(src="https://i.ibb.co/mzbZKrX/home-page.png" alt="home" style="width:30px;height:30px;")
                div(class="menu_group")
                    div(class="other")
                        a(id="1" href="../tutorList/") 튜터 찾기
                    div(class="other")
                        a(id="2" href="../post/") 질문/답변
                    div(class="other") 
                        a(id="3" href="../findPost/") 찾아요
                    div(class="current")
                        a(id="4" href="./") 멘토링 목록
                    div(class="other")
                        a(id="5" href="../requestList/") 받은 요청
                    div(class="other")
                        a(id="6" href="../sendList/") 보낸 요청
                    div(class="other")
                        a(id="7" href="../myProfile/") 내 프로필
        div(class="ChatBox")
            div(class="ChatList")
                div(class="chatArea" style = "overflow:auto;")
                    -if(rows!=null)
                        for item in rows
                            -if(item.chatUser_id==user_id)
                                div(class="ChatBubble")
                                    span(class="mymsg") #{item.content}
                                        h2 #{item.date}
                            -else
                                div(class="ChatBubble2")
                                    span(class="othermsg") #{item.content}
                                        h2 #{item.date}
                div(class="inputArea")
                    ul(id="messages")
                        form(aciton="")
                            input(id = "m" placeholder="메세지를 입력해주세요." style="padding-bottom : 170px; padding-left : 10px;")
    script(src="http://localhost:3000/socket.io/socket.io.js")
    script(type="text/javascript").
        var socket = io.connect('http://localhost:3000/');
        var room_id = document.location.href.split('=')[1];
        var currentUser = "#{user_id}";
        console.log(socket)
        console.log(socket.on('loadUser'));
        var messages = document.querySelector('div.chatArea');
        var messageBubble = document.createElement('div');
        var messageTag = document.createElement("span");
        var messageDate = document.createElement("h2");
        var currentTime = new Date();
        var current = currentTime.getFullYear() + '/' + currentTime.getMonth() + '/' + currentTime.getDate() + '/' + currentTime.getDay();
        socket.emit('join',room_id);
        var form = document.querySelector('form');
        socket.on('resultMessage',(user_id, msg) => {
            if(currentUser == user_id) {
                messageTag.innerText = msg;
                messageDate.innerText = current;
                messageTag.className = "mymsg";
                messageTag.appendChild(messageDate);
                messageBubble.appendChild(messageTag);
                messages.appendChild(messageBubble);
                messageBubble.className = "ChatBubble";
            } else {
                messageTag.innerText = msg;
                messageDate.innerText = current;
                messageTag.className = "othermsg";
                messageTag.appendChild(messageDate);
                messageBubble.appendChild(messageTag);
                messages.appendChild(messageBubble);
                messageBubble.className = "ChatBubble2";
            }
        })
        form.onsubmit = (e) => {
            e.preventDefault();
            var msginput = document.getElementById('m');

            socket.emit('message', room_id, currentUser, msginput.value);
            msginput.value = "";
        }
