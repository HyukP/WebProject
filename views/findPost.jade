html
    link(rel='stylesheet', href='/stylesheets/post.css')
    head
        title Find Post
        script(src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js") 
    body
        nav(class="nav")
            ul(class="navbar__menu")
                div(class="home")
                    a(href="../")
                        img(src="https://i.ibb.co/mzbZKrX/home-page.png" alt="home" style="width:30px;height:30px;")
                div(class="menu_group")
                    div(class="other")
                        a(id="1" href="../tutorList/") 튜터 찾기
                    div(class="other")
                        a(id="2" href="../post/") 질문/답변
                    div(class="current") 
                        a(id="3" href="./") 찾아요
                    div(class="other")
                        a(id="4" href="../tutoringList/") 멘토링 목록
                    div(class="other")
                        a(id="5" href="../requestList/") 받은 요청
                    div(class="other")
                        a(id="6" href="../sendList/") 보낸 요청
        div(class="postBox")
            div(style="display:flex;flex-direction:column; width:80%; height:100%; margin-left:auto;margin-right:auto;")
                div(class="postAct")
                    div(class="SearchAct")
                        input(class="search")
                        img(src="https://i.ibb.co/932jcqF/loupe.png" style="width:30px; height:30px; margin-left:4px")
                    button(class="write" onClick="postWrite()")
                        h2 글쓰기
                div(class="postArea")
                    for item in rows
                        div(id = "post #{item.id}" class="postList" onClick="showDetail(id)")
                            div(class="postTitle")
                                h1 #{item.title}
                            div(class="postContent")
                                h2 #{item.content}
                            div(class="postOwner_Count")
                                div(class="postCount")
                                    h2 조회 수 #{item.count}
                                div(class="postOwner")
                                    h2 작성자 : #{item.nickname}
            
    script(type="text/javascript").
        const showDetail = (id) => {
                axios.get('http://localhost:3000/findpost/updateCount',{
                    method : 'POST',
                    params: {
                        post_id : id.split(' ')[1]
                    },
                    headers: {
                        'Content-Type': 'application/json',
                    },
                }).then(response => {
                    console.log(response.data);
                })
                document.location.href = "./postDetail?post_id="+id.split(' ')[1];
        }
        const postWrite = () => {
                document.location.href = "./write";
        }
        const testTrans = () => {
            var lang = "#{lang}"
            if(lang=="China") {
               var text = document.querySelector('div.menu_group').innerText;
                axios.get('http://localhost:3000/translate',{
                    method: 'POST',
                    params: {
                        target : 'zh-CN',
                        text : text
                    },
                    headers: {
                        'Content-Type': 'application/json',
                    },
                }).then(response=> {
                    var list = response.data.message.result.translatedText.split('\n');
                    for(var i = 1; i<= 6; i++) {
                        document.getElementById(i).textContent = list[i-1];
                    }
                })
            } else if(lang=="French") {
                var text = document.querySelector('div.menu_group').innerText;
                    axios.get('http://localhost:3000/translate',{
                        method: 'POST',
                        params: {
                            target : 'fr',
                            text : text
                        },
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    }).then(response=> {
                        var list = response.data.message.result.translatedText.split('\n');
                        for(var i = 1; i<= 6; i++) {
                            document.getElementById(i).textContent = list[i-1];
                        }
                    })
            } else if(lang=="Vietnam") {
                var text = document.querySelector('div.menu_group').innerText;
                    axios.get('http://localhost:3000/translate',{
                        method: 'POST',
                        params: {
                            target : 'vi',
                            text : text
                        },
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    }).then(response=> {
                        var list = response.data.message.result.translatedText.split('\n');
                        for(var i = 1; i<= 6; i++) {
                            document.getElementById(i).textContent = list[i-1];
                        }
                    })
            }
        }
        testTrans();

